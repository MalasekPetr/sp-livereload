{"version":3,"file":"IconService.js","sourceRoot":"","sources":["../../../src/extensions/common/IconService.ts"],"names":[],"mappings":"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","sourcesContent":["// eslint-disable-next-line \nconst ICON_FILE_PATH = require('../assets/icons.svg');\n// const TEMPLATE_SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"hoo-icon-svg\" viewBox=\"0 0 32 32\" aria-hidden=\"true\">\n//                         <title>{{ title }}</title>\n//                         <use href=\"../../images/icons.svg\"></use>\n//                         </svg>`\nconst TEMPLATE_SVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"hoo-icon-svg\" viewBox=\"0 0 32 32\" aria-hidden=\"true\">\n                        <title>{{ title }}</title>\n                        </svg>`;\n// const assetFolder = '../assets/';\n\nconst domParser = new DOMParser();\n\ninterface Icon {\n    name: string;\n    path: string;\n    // eslint-disable-next-line\n    viewBox?: string | null;\n    type?: string | undefined\n}\n\nclass IconService {\n    // eslint-disable-next-line\n    svgIcons: Document;\n    icons: Icon[] = [];\n    // eslint-disable-next-line\n    allIconNames: string[] = [];\n\n    async _loadIcons() {\n\n        try {\n\n            const iconsRsponse = await fetch(ICON_FILE_PATH);\n\n            if (iconsRsponse) {\n\n                const iconsContent = await iconsRsponse.text();\n\n                if (iconsContent) {\n\n                    this.svgIcons = domParser.parseFromString(iconsContent, \"image/svg+xml\");\n\n                    const allSymbols = this.svgIcons.querySelectorAll('symbol');\n\n                    allSymbols.forEach(symbol => {\n\n                        const icon: Icon = {\n                            name: symbol.id,\n                            path: symbol.innerHTML,\n                            viewBox: symbol.getAttribute('viewBox'),\n                            type: symbol.dataset.icontype\n                        }\n\n                        this.icons.push(icon);\n                        this.allIconNames.push(symbol.id);\n\n                    });\n\n                }\n\n            }\n\n        } catch {\n            console.log('Some Error Happened');\n        }\n\n    }\n\n\n    public getSVG(v: string, svgTitle?: string, classNames?: string) {\n\n        if (this.allIconNames.indexOf(v) !== -1) {\n\n            const icon = this.icons.filter(item => {\n\n                return item.name === v;\n\n            })\n\n            if (icon.length === 1) {\n\n                const curIcon = icon[0];\n\n                const svgtemplate = domParser.parseFromString(TEMPLATE_SVG, \"image/svg+xml\");\n\n                if (svgtemplate && svgtemplate.documentElement) {\n\n                    const svgIcon = svgtemplate.documentElement;\n\n                    const path = domParser.parseFromString(curIcon.path, \"image/svg+xml\");\n\n                    if (path && path.documentElement) {\n\n                        svgIcon.append(path.documentElement)\n\n                    }\n                    if(curIcon.viewBox){\n\n                        svgIcon.setAttribute('viewBox', curIcon.viewBox)\n\n                    }\n\n                    if (svgTitle) {\n\n                        const elemTitle = svgIcon.querySelector('title');\n\n                        if (elemTitle) {\n                            elemTitle.textContent = svgTitle;\n                        }\n\n                    } else {\n                        const elemTitle = svgIcon.querySelector('title');\n                        elemTitle?.remove();\n                    }\n\n                    if(classNames){\n                        svgIcon.classList.add(classNames);\n                    }\n\n                    return svgIcon;\n\n                }\n\n\n            }\n\n        } else {\n            console.debug(`Icon ${v} not found`);\n        }\n\n    }\n\n\n}\n\nconst _icons = new IconService();\nawait _icons._loadIcons();\n\nexport const Icons = _icons;"]}